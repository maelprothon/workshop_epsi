var nodemailer = require('nodemailer');

var exports;

//Mail configuration
var smtpConfig = {
  host: 'ubuntu.projetsysteme.fr',
  port:25,
  auth: {
    user: 'newsletter@projetsysteme.fr',
    pass: 'abcd4ABCD'
  },
  tls:{
    rejectUnauthorized: false
  }
};

// create reusable transporter object using the default SMTP transport
var transporter = nodemailer.createTransport(smtpConfig); 

// send mail with defined transport object
exports.sendEmailToMTA = function(mailOptions,result) {
    mailOptions.from= 'newsletter@projetsysteme.fr';
    transporter.sendMail(mailOptions, function (error, info) {
        if (error) {
           result(true,error);
        }
        // result(false,'Message sent: ');
    });
};
